<!DOCTYPE HTML>
<html ng-app="crewCaller">
    <head>
        <title>Crew Caller</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    </head>
    <body>
        <h1>Crew Caller</h1>

        <!--<h2>All Crew Members</h2>-->

        <!--<div ng-controller="getAllCrew">-->
            <!--<table id="crewTable" style="border: 1px">-->
                <!--<thead>-->
                    <!--<tr>-->
                        <!--<th>First Name</th>-->
                        <!--<th>Last Name</th>-->
                        <!--<th>Phone Number</th>-->
                    <!--</tr>-->
                <!--</thead>-->
                <!--<tbody>-->
                    <!--<tr ng-repeat="crewMember in allCrew">-->
                        <!--<td>{{ crewMember.firstName }}</td>-->
                        <!--<td>{{ crewMember.lastName }}</td>-->
                        <!--<td>{{ crewMember.phone }}</td>-->
                    <!--</tr>-->
                <!--</tbody>-->
            <!--</table>-->
        <!--</div>-->

        <div ng-controller="getCrewForDate">
            <div>
                <datepicker ng-model="dt" ng-click="datePickerClicked()" min="startDate" max="endDate"></datepicker>
            </div>
            <table id="crewTableForDate" style="border: 1px">
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Phone Number</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="crewMember in crewForDate">
                        <td>{{ crewMember.firstName }}</td>
                        <td>{{ crewMember.lastName }}</td>
                        <td>{{ crewMember.phone }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.8/angular.js"></script>
        <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.js"></script>
        <script src="http://code.angularjs.org/1.3.0-beta.3/angular-resource.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script>
            var crewCallerApp = angular.module("crewCaller", [
                'ngResource',
                'ui.bootstrap'
            ]).factory("GetAllCrew", function ($resource) {
                return $resource("secure/jas/get/all");
            }).factory("GetCrewForDate", function ($resource) {
                return $resource("secure/jas/get/date")
            }).controller("getAllCrew", function ($scope, GetAllCrew) {
                GetAllCrew.query(function (data) {
                    $scope.allCrew = data;
                });
            }).controller('getCrewForDate', function ($scope, GetCrewForDate) {
                $scope.startDate = new Date(2014, 3, 20, 0, 0, 0, 0);
                $scope.endDate = new Date(2014, 3, 22, 0, 0, 0, 0);
                $scope.dt = $scope.startDate;

                $scope.datePickerClicked = function () {
                    // Convert the date to UTC
                    console.log($scope.dt.valueOf());

                    GetCrewForDate.query({date: $scope.dt.valueOf()}, function (data) {
                        console.log(data);
                        $scope.crewForDate = data;
                    });
                }
            });
        </script>
    </body>
</html>
